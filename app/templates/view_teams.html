{% import "toolkit/summary-table.html" as summary %}

{% extends "_base_page.html" %}

{% block page_title %}
Buyers â€“ Digital Marketplace admin
{% endblock %}

{% block breadcrumb %}
{%
      with items = [
          {
              "link": url_for('.index'),
              "label": "Admin home"
          },
      ]
  %}
{% include "_breadcrumb.html" %}
{% endwith %}
{% endblock %}

{% block main_content %}
<div>
  <h3>Team Details</h3>
  Team ID: {{team_id}}
  <br/>
  Team Name: {{team.name}}
  <br/> 
  Team Email Address : {{team.emailAddress}}
</div>

<div>
    <h3> Team Leads</h3>
    {% call(item) summary.list_table(
            team.teamLeads,
            team.teamMembers,
            field_headings=[
                'Email Address',
                'Name',
                'Team Leads',
                'Create Drafts',
                'Publish Opporunities',
                'Answer Seller Questions',
                'Download Responses', 
                'Download Reports',
                'Create Work Orders'
            ],
            field_headings_visible=True)
        %}
            {% call summary.row() %}
            {% for i in team.teamLeads %}
              {% for key, value in team.teamLeads[i].items() %}
                  {{ summary.field_name(value) }}
                  <!-- {% call summary.field() %} -->  
                  {% endcall %}
              {% endfor %}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {{ summary.field_name(True) }}
              {% endfor %}
            {% endcall %}
        {% endcall %}
    </div>


    <div>
        <h3> Team Members</h3>
        {% call(item) summary.list_table(
                team.teamMembers,
                field_headings=[
                    'Email Address',
                    'Name',
                    'Download Reports',
                    'Publish Opporunities',
                    'Create Drafts',
                    'Answer Seller Questions', 
                    'Create Work Orders'
                ],
                field_headings_visible=True)
            %}
                {% call summary.row() %}
                {% for i in team.teamMembers %}
                  {% for key, value in team.teamMembers[i].items() %}
                      {{ summary.field_name(value) }}
                      <!-- {% call summary.field() %} -->  
                      {% endcall %}
                  {% endfor %}
                  {% endfor %}
                {% endcall %}
            {% endcall %}
        </div>



        <div>
            <h3> Team Members</h3>
            {% call(item) summary.list_table(
                    team.teamMembers,
                    field_headings=[
                        'Email Address',
                        'Name',
                        'Download Reports',
                        'Publish Opporunities',
                        'Create Drafts',
                        'Answer Seller Questions', 
                        'Create Work Orders'
                    ],
                    field_headings_visible=True)
                %}
                    {% call summary.row() %}
                    {% for i in team.teamMembers %}
                      {% for key, value in team.teamMembers[i].items() %}
                          {{ summary.field_name(value) }}
                          <!-- {% call summary.field() %} -->  
                          {% endcall %}
                      {% endfor %}
                      {% endfor %}
                    {% endcall %}
                {% endcall %}
            </div>

<div>
  {% for i in team.teamLeads %}
  <h3> Team Leads Information</h3>
    {% for key, value in team.teamLeads[i].items() %}
        {% if key == 'emailAddress' %}
          email address: {{ value }}
          <br/>
        {% else %}
          name : {{ value }}
          <br/>
          {% endif %} 
      {% endfor %}
  {% endfor %}
</div>

<div>
<h3> Team Members</h3>
  {% for i in team.teamMembers %}
      {% for key, value in team.teamMembers[i].items() %}
          {% if key == 'emailAddress'%}
            email address: {{ value }}
            <br/>
         {% elif key == 'name'%}
            name : {{ value }}
            <br/>
            <br/>
          {% endif %}
      {% endfor %}
    {% endfor %}
</div>

<div> 
    <h3> Team Members' Permissions</h3>
    {% for i in team.teamMembers %}
        {% for key, value in team.teamMembers[i].items() %}
            {% if key == 'emailAddress'%}
              email address: {{ value }}
              <br/>
            {% elif key == 'name'%}
              name: {{ value }}
              <br/>
            {% elif key == 'permissions' %}
              <br/>Permissions:<br/> 
              <table>
              {% for permissionKey, permissionValue in value.items() %}
                <tr>
                  <td>{{ permissionKey  | replace("_"," ")}}</td>
                  <td>: {{ permissionValue }}</td>
                </tr>
            {% endfor %}
            </table>
            {% else %}
                {{key}}
                {{value}}
                <br/>
                <br/>
            {% endif %}
      {% endfor %}
    {% endfor %}
</div>

<div>
<h3> List of Team Briefs</h3>
    <table>
    {% for b in briefs %}
          <tr>
            <td> <a href="{{ url_for('.find_buyer_by_brief_id', brief_id=b.brief_id) }}" class="question">{{ b.brief_id }}</a></td>
            <td>{{ b.name }}</td>
          </tr>
    {% endfor %}
    </table>
</div>

{% endblock %}